<!DOCTYPE html>
<html>

<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
    <div id="box"></div>
    <input type="text" id="inp" onkeypress="CheckInfo()">
    <button onclick="sendMsg()">发送</button>
    <br>
    <input type="text" placeholder="input your name" id="myname">
    <script>
        var inp = document.getElementById("inp");
        var box = document.getElementById("box");
        var myname = document.getElementById("myname");
        function CheckInfo() {
            if (event.keyCode == 13) {
                sendMsg();
            }
        }
        function sendMsg() {
            localStorage.setItem("msg", inp.value + "&&&" + myname.value);
            box.innerHTML += "<div>" + myname.value + ": " + inp.value + "</div>";
            inp.value = "";
        }
        window.addEventListener('storage', function (e) {
            var value = localStorage.getItem("msg");
            box.innerHTML += "<div>" + value.split("&&&")[1] + ": " + value.split("&&&")[0] + "</div>";
        })
    </script>
</body>

</html>
